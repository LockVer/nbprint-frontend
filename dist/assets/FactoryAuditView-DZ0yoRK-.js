import{_ as q,u as J,r as c,M as R,H as G,i as K,o as Q,j as u,c as m,k as U,l as n,e as d,m as l,d as N,x as W,F as Z,z as i,s as I,g as x,L as ee,q as te,y as ae,E as le,p as oe,f as ne}from"./index-Cc1BFxfY.js";import{a as se,X as p}from"./XComponent-DjQYbzDx.js";import{S as re,h as ue}from"./SearchService-D2tNcNLW.js";const ce=_=>(oe("data-v-4e23d805"),_=_(),ne(),_),de={class:"general-content"},ie={class:"number-range-container"},me={class:"number-range"},pe=ce(()=>d("div",{class:"to"},[d("span",null,"-")],-1)),_e={key:0,class:"error-message"},ge={style:{display:"flex","align-items":"center"}},he=["disabled","onClick"],fe={key:0,class:"pager"},ve={__name:"FactoryAuditView",setup(_){const L=J(),z=c([]),b=c(0),g=c(""),D=c(""),O=new re,M=new R,o=G({chineseName:"",customerName:"",smallCardSize:"",minTotal:null,maxTotal:null}),F=c(null),h=c(""),f=c(""),k=c(1),y=c(12);K(o,a=>{if(o.minTotal!==null&&o.maxTotal!==null&&o.maxTotal<o.minTotal){g.value="最大值不能小于最小值";return}g.value="";for(const e in a)(a[e]===""||a[e]===null)&&delete a[e];$({...a,startTime:h.value,endTime:f.value})});const Y=a=>{if(a){const e=a.map(s=>{const w=s.getFullYear(),C=String(s.getMonth()+1).padStart(2,"0"),S=String(s.getDate()).padStart(2,"0"),T=String(s.getHours()).padStart(2,"0"),r=String(s.getMinutes()).padStart(2,"0"),V=String(s.getSeconds()).padStart(2,"0");return`${w}-${C}-${S} ${T}:${r}:${V}`});h.value=e[0],f.value=e[1]}else h.value="",f.value="";$({...o,startTime:h.value,endTime:f.value})},$=a=>{for(const e in a)(a[e]===""||a[e]===null)&&delete a[e];v(a)},B=a=>{M.checkLock(a.id).then(e=>{localStorage.setItem("orderDetails",JSON.stringify(e.data)),L.push(`/factoryaudit/detail/${a.id}`)}).catch(e=>{le.error(e)})},v=a=>{let e={pageSize:y.value,pageNum:k.value};a&&(e=Object.assign(e,a)),M.getFactoryList(e).then(s=>{z.value=s.data.orderList,b.value=s.data.totalPage}).catch(s=>{console.log(s)})},P=a=>{y.value=a,v()},E=a=>{k.value=a,v()};return Q(()=>{O.getOptions().then(a=>{D.value=a.data}).catch(a=>{console.log(a)}),v()}),(a,e)=>{const s=u("el-input"),w=u("el-option"),C=u("el-select"),S=u("el-input-number"),T=u("el-date-picker"),r=u("el-table-column"),V=u("el-tag"),X=u("el-link"),j=u("el-table"),A=u("el-pagination");return m(),U(se,{title:"工厂审核"},{default:n(()=>[d("div",de,[l(p,{label:"产品名称"},{default:n(()=>[l(s,{modelValue:o.productName,"onUpdate:modelValue":e[0]||(e[0]=t=>o.productName=t),placeholder:"请输入产品名称"},null,8,["modelValue"])]),_:1}),l(p,{label:"客户"},{default:n(()=>[l(s,{modelValue:o.customerName,"onUpdate:modelValue":e[1]||(e[1]=t=>o.customerName=t),placeholder:"请输入客户名称"},null,8,["modelValue"])]),_:1}),l(p,{label:"尺寸"},{default:n(()=>[l(C,{modelValue:o.smallCardSize,"onUpdate:modelValue":e[2]||(e[2]=t=>o.smallCardSize=t),placeholder:"请选择尺寸",clearable:""},{default:n(()=>[(m(!0),N(Z,null,W(D.value.cardSizes,(t,H)=>(m(),U(w,{key:H,label:t,value:t},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(p,{label:"数量"},{default:n(()=>[d("div",ie,[d("div",me,[l(S,{placeholder:"最小值",modelValue:o.minTotal,"onUpdate:modelValue":e[3]||(e[3]=t=>o.minTotal=t),controls:!1},null,8,["modelValue"]),pe,l(S,{placeholder:"最大值",modelValue:o.maxTotal,"onUpdate:modelValue":e[4]||(e[4]=t=>o.maxTotal=t),controls:!1},null,8,["modelValue"])]),g.value?(m(),N("div",_e,i(g.value),1)):I("",!0)])]),_:1}),l(p,{label:"创建时间"},{default:n(()=>[l(T,{modelValue:F.value,"onUpdate:modelValue":e[5]||(e[5]=t=>F.value=t),type:"daterange","start-placeholder":"开始日期","end-placeholder":"结束日期","append-to-body":!0,"default-value":[new Date,new Date],onChange:Y},null,8,["modelValue","default-value"])]),_:1})]),l(j,{data:z.value,style:{width:"100%"}},{default:n(()=>[l(r,{prop:"productName",label:"产品名称","show-overflow-tooltip":!0},{default:n(t=>[x(i(t.row.productName)+"（"+i(t.row.chineseName)+"） ",1)]),_:1}),l(r,{prop:"customerName",label:"客户名字"}),l(r,{prop:"status",label:"状态"},{default:n(t=>[l(V,{type:["warning","warning","success","danger"][t.row.checkStatus]},{default:n(()=>[x(i(["待审核","待审核","已通过","未通过"][t.row.checkStatus]),1)]),_:2},1032,["type"])]),_:1}),l(r,{prop:"total",label:"数量"}),l(r,{prop:"smallCardSize",label:"尺寸"}),l(r,{prop:"businessPeople",label:"业务员"}),l(r,{prop:"createTime",label:"创建时间"},{default:n(t=>[d("div",ge,[d("span",null,i(ee(ue)(t.row.createTime).format("YYYY-MM-DD HH:mm:ss")),1)])]),_:1}),l(r,{fixed:"right",label:"操作",width:"80"},{default:n(t=>[l(X,{type:"primary",href:t.row.pdfOss,onClick:e[6]||(e[6]=te(()=>{},["stop"]))},{default:n(()=>[x("下载")]),_:2},1032,["href"])]),_:1}),l(r,{fixed:"right",label:"审核",width:"100"},{default:n(t=>[d("button",{class:ae(["btn",{"btn-disabled":t.row.checkStatus==2||t.row.checkStatus==3}]),disabled:t.row.checkStatus==2||t.row.checkStatus==3,onClick:H=>B(t.row)},i(["审核","审核","已审核","已审核"][t.row.checkStatus]),11,he)]),_:1})]),_:1},8,["data"]),b.value?(m(),N("div",fe,[l(A,{onSizeChange:P,onCurrentChange:E,"current-page":k.value,"page-size":y.value,layout:"prev, pager, next",background:"","page-count":b.value},null,8,["current-page","page-size","page-count"])])):I("",!0)]),_:1})}}},ye=q(ve,[["__scopeId","data-v-4e23d805"]]);export{ye as default};
