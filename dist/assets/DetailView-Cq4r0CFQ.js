import{X as L,a as F}from"./XComponent-gqGWi3a1.js";import{X as R,L as $}from"./LayoutFooter-wWzKYPlc.js";import{_ as q,u as O,J as G,r as y,H as C,M as K,i as Q,o as W,j as X,c as t,d as r,F as u,x as m,m as E,k as v,l as b,e as s,z as f,s as S,g as Y,E as B,p as Z,f as ee}from"./index-D_kmQFyZ.js";const ae=[{title:"订单详情",items:[{label:"产品名称",name:"productName"},{label:"客户名称",name:"customerName"},{label:"业务员",name:"businessPeople"},{label:"创建时间",name:"createTime"}]}],te=[{title:"审核内容",items:[{adTitle:"基本审核项",adItem:[{label:"产品信息",name:"productInf",selectedValue:"",errorMessage:""},{label:"装盒参数",name:"packingParameter",selectedValue:"",errorMessage:""}]},{adTitle:"小卡审核项",adItem:[{label:"小卡盒号",name:"smallCardBoxNumber",selectedValue:"",errorMessage:""},{label:"小卡尺寸",name:"smallCardSize",selectedValue:"",errorMessage:""},{label:"小卡边距",name:"smallCardMargin",selectedValue:"",errorMessage:""},{label:"奖符数量",name:"prizeAmount",selectedValue:"",errorMessage:""},{label:"小卡顺序",name:"smallCardSequence",selectedValue:"",errorMessage:""}]},{adTitle:"宣传卡审核项",adItem:[{label:"宣传卡盒号",name:"adCardBoxNumber",selectedValue:"",errorMessage:""},{label:"宣传卡奖符边距",name:"adCardPrizeMargin",selectedValue:"",errorMessage:""},{label:"宣传卡边距",name:"adCardMargin",selectedValue:"",errorMessage:""}]},{adTitle:"Payout审核项",adItem:[{label:"标题",name:"title",selectedValue:"",errorMessage:""},{label:"销售总额",name:"totalSales",selectedValue:"",errorMessage:""},{label:"奖符区",name:"lotteryArea",selectedValue:"",errorMessage:""},{label:"返奖区",name:"prizeArea",selectedValue:"",errorMessage:""},{label:"所用模板",name:"usedTemplate",selectedValue:"",errorMessage:""}]}]}],N=V=>(Z("data-v-6aec1ec3"),V=V(),ee(),V),le={class:"factory-details"},se={class:"generalInfo"},re={class:"value"},oe={class:"audit-title"},ce={class:"audit-content"},ne={class:"generalInfo"},ie={key:0,class:"error-message"},de={key:0,class:"audit-card"},ue=N(()=>s("div",{class:"audit-title"},"修改意见",-1)),me={class:"exception"},pe=N(()=>s("div",{class:"exception-title"},"异常项",-1)),_e={class:"items"},he={class:"remark"},ge=N(()=>s("div",{class:"remark-title"},"异常描述（必填）",-1)),ve={class:"items"},be={key:0,class:"error-message"},fe={__name:"DetailView",setup(V){const w=O(),D=G(),i=y(""),A=C([{text:"正常",value:"1"},{text:"异常",value:"0"}]),k=C([...ae]),M=C([...te]),p=y(!1),c=y([]),_=y(""),T=new K;Q(()=>i.value,e=>{e&&(_.value="")}),W(()=>{let e=JSON.parse(localStorage.getItem("orderDetails"));k.forEach(a=>{a.items.forEach(l=>{e[l.name]&&(l.datas=e[l.name])})})});const I=e=>{if(console.log(c.value),e.selectedValue==="0")c.value.some(a=>a.label===e.label)||c.value.push({label:e.label,name:e.name}),p.value=!0;else{const a=c.value.findIndex(l=>l.label===e.label);a!==-1&&c.value.splice(a,1),p.value=c.value.length>0}},P=()=>{let e=!0;if(M.forEach(a=>{a.items.forEach(l=>{l.adItem.forEach(n=>{n.selectedValue?n.errorMessage="":(n.errorMessage=`${n.label} 为必填项`,e=!1)})})}),!e){B.error("请检查必填项");return}if(p.value&&!i.value){B.error("请填写异常描述"),_.value="请填写异常描述";return}U()},U=()=>{let e={};M.forEach(a=>{a.items.forEach(l=>{l.adItem.forEach(n=>{e[n.name]=n.selectedValue})})}),e={id:Number(D.params.id),...e,exceptionItem:c.value.map(a=>a.label).join(","),remark:i.value},T.submitFactoryCheck(e).then(a=>{B({type:"success",message:"提交成功",duration:1e3,onClose:()=>{j(),w.go(-1)}})}).catch(a=>{console.log(a)})},j=()=>{i.value="",k.forEach(e=>{e.items.forEach(a=>{a.datas=""})}),M.forEach(e=>{e.items.forEach(a=>{a.adItem.forEach(l=>{l.selectedValue="",l.errorMessage=""})})}),c.value=[],p.value=!1,_.value=""},H=()=>{T.checkUnlock(D.params.id).then(e=>{console.log(e),w.go(-1)}).catch(e=>{console.log(e)})};return(e,a)=>{const l=X("el-tag"),n=X("el-input");return t(),r("div",le,[(t(!0),r(u,null,m(k,(h,x)=>(t(),v(F,{key:x,title:h.title,cardStyle:{height:"auto"}},{default:b(()=>[s("div",se,[(t(!0),r(u,null,m(h.items,(o,g)=>(t(),v(L,{key:g,label:o.label,titleStyle:"#484848",width:"15%"},{default:b(()=>[s("div",re,f(o.datas),1)]),_:2},1032,["label"]))),128))])]),_:2},1032,["title"]))),128)),(t(!0),r(u,null,m(M,(h,x)=>(t(),v(F,{key:x,title:h.title,cardStyle:{height:"auto"},class:"audit"},{default:b(()=>[(t(!0),r(u,null,m(h.items,(o,g)=>(t(),r("div",{class:"audit-card",key:g},[s("div",oe,[s("span",null,f(o.adTitle),1)]),s("div",ce,[s("div",ne,[(t(!0),r(u,null,m(o.adItem,(d,J)=>(t(),v(L,{key:J,label:d.label,width:"15%",titleStyle:"#484848",titleBottom:"12px",marginBottom:"16px"},{default:b(()=>[E(R,{modelValue:d.selectedValue,"onUpdate:modelValue":[z=>d.selectedValue=z,z=>I(d,o.adTitle)],DataList:A,type:"radio"},null,8,["modelValue","onUpdate:modelValue","DataList"]),d.errorMessage?(t(),r("div",ie,f(d.errorMessage),1)):S("",!0)]),_:2},1032,["label"]))),128))])])]))),128)),p.value?(t(),r("div",de,[ue,s("div",me,[pe,s("div",_e,[(t(!0),r(u,null,m(c.value,(o,g)=>(t(),v(l,{key:g,color:"#0022991A"},{default:b(()=>[Y(f(o.label),1)]),_:2},1024))),128))])]),s("div",he,[ge,s("div",ve,[E(n,{modelValue:i.value,"onUpdate:modelValue":a[0]||(a[0]=o=>i.value=o),style:{width:"100%"},autosize:"",type:"textarea",placeholder:"备注"},null,8,["modelValue"]),_.value?(t(),r("div",be,f(_.value),1)):S("",!0)])])])):S("",!0)]),_:2},1032,["title"]))),128)),E($,{onSubmit:P,onBack:H})])}}},ke=q(fe,[["__scopeId","data-v-6aec1ec3"]]);export{ke as default};
