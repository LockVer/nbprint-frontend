import{X as I,a as L}from"./XComponent-D69QkLrH.js";import{X as R,L as $}from"./LayoutFooter-M3EQex2D.js";import{_ as q,u as O,J as G,r as k,H as C,M as K,i as Q,o as W,j as F,c as t,d as r,F as u,x as m,m as E,k as v,l as b,e as s,z as f,s as S,g as Y,E as N,N as Z,p as ee,f as ae}from"./index-vR3Lhgap.js";const te=[{title:"订单详情",items:[{label:"产品名称",name:"productName"},{label:"客户名称",name:"customerName"},{label:"业务员",name:"userName"},{label:"创建时间",name:"createTime"}]}],le=[{title:"审核内容",items:[{adTitle:"基本审核项",adItem:[{label:"产品信息",name:"productInf",selectedValue:"",errorMessage:""},{label:"装盒参数",name:"packingParameter",selectedValue:"",errorMessage:""}]},{adTitle:"小卡审核项",adItem:[{label:"小卡盒号",name:"smallCardBoxNumber",selectedValue:"",errorMessage:""},{label:"小卡尺寸",name:"smallCardSize",selectedValue:"",errorMessage:""},{label:"小卡边距",name:"smallCardMargin",selectedValue:"",errorMessage:""},{label:"奖符数量",name:"prizeAmount",selectedValue:"",errorMessage:""},{label:"小卡顺序",name:"smallCardSequence",selectedValue:"",errorMessage:""}]},{adTitle:"宣传卡审核项",adItem:[{label:"宣传卡盒号",name:"adCardBoxNumber",selectedValue:"",errorMessage:""},{label:"宣传卡奖符边距",name:"adCardPrizeMargin",selectedValue:"",errorMessage:""},{label:"宣传卡边距",name:"adCardMargin",selectedValue:"",errorMessage:""}]},{adTitle:"Payout审核项",adItem:[{label:"标题",name:"title",selectedValue:"",errorMessage:""},{label:"销售总额",name:"totalSales",selectedValue:"",errorMessage:""},{label:"奖符区",name:"lotteryArea",selectedValue:"",errorMessage:""},{label:"返奖区",name:"prizeArea",selectedValue:"",errorMessage:""},{label:"所用模板",name:"usedTemplate",selectedValue:"",errorMessage:""}]}]}],B=V=>(ee("data-v-14d62d2a"),V=V(),ae(),V),se={class:"factory-details"},re={class:"generalInfo"},oe={class:"value"},ce={class:"audit-title"},ne={class:"audit-content"},de={class:"generalInfo"},ie={key:0,class:"error-message"},ue={key:0,class:"audit-card"},me=B(()=>s("div",{class:"audit-title"},"修改意见",-1)),_e={class:"exception"},he=B(()=>s("div",{class:"exception-title"},"异常项",-1)),pe={class:"items"},ge={class:"remark"},ve=B(()=>s("div",{class:"remark-title"},"异常描述（必填）",-1)),be={class:"items"},fe={key:0,class:"error-message"},Ve={__name:"DetailView",setup(V){const w=O(),D=G(),d=k(""),U=C([{text:"正常",value:"1"},{text:"异常",value:"0"}]),y=C([...te]),M=C([...le]),_=k(!1),n=k([]),h=k(""),T=new K;Q(()=>d.value,e=>{e&&(h.value="")}),W(()=>{let e=JSON.parse(localStorage.getItem("orderDetails"));y.forEach(a=>{a.items.forEach(l=>{e[l.name]&&(l.datas=e[l.name])})})});const X=e=>{if(e.selectedValue==="0")n.value.some(a=>a.label===e.label)||n.value.push({label:e.label,name:e.name}),_.value=!0;else{const a=n.value.findIndex(l=>l.label===e.label);a!==-1&&n.value.splice(a,1),_.value=n.value.length>0}},A=()=>{let e=!0;if(M.forEach(a=>{a.items.forEach(l=>{l.adItem.forEach(c=>{c.selectedValue?c.errorMessage="":(c.errorMessage=`${c.label} 为必填项`,e=!1)})})}),!e){N.error("请检查必填项");return}if(_.value&&!d.value){N.error("请填写异常描述"),h.value="请填写异常描述";return}P()},P=()=>{let e={};M.forEach(a=>{a.items.forEach(l=>{l.adItem.forEach(c=>{e[c.name]=c.selectedValue})})}),e={checkId:Number(D.params.id),nbUserId:Z.state.userInfo.id,...e,exceptionItem:n.value.map(a=>a.label).join(","),remark:d.value},console.log(e),T.submitFactoryCheck(e).then(a=>{N({type:"success",message:"提交成功",duration:2e3,onClose:()=>{j(),w.go(-1)}})}).catch(a=>{console.log(a)})},j=()=>{d.value="",y.forEach(e=>{e.items.forEach(a=>{a.datas=""})}),M.forEach(e=>{e.items.forEach(a=>{a.adItem.forEach(l=>{l.selectedValue="",l.errorMessage=""})})}),n.value=[],_.value=!1,h.value=""},H=()=>{T.checkUnlock(D.params.id).then(e=>{console.log(e),w.go(-1)}).catch(e=>{console.log(e)})};return(e,a)=>{const l=F("el-tag"),c=F("el-input");return t(),r("div",se,[(t(!0),r(u,null,m(y,(p,x)=>(t(),v(L,{key:x,title:p.title,cardStyle:{height:"auto"}},{default:b(()=>[s("div",re,[(t(!0),r(u,null,m(p.items,(o,g)=>(t(),v(I,{key:g,label:o.label,titleStyle:"#484848",width:"15%"},{default:b(()=>[s("div",oe,f(o.datas),1)]),_:2},1032,["label"]))),128))])]),_:2},1032,["title"]))),128)),(t(!0),r(u,null,m(M,(p,x)=>(t(),v(L,{key:x,title:p.title,cardStyle:{height:"auto"},class:"audit"},{default:b(()=>[(t(!0),r(u,null,m(p.items,(o,g)=>(t(),r("div",{class:"audit-card",key:g},[s("div",ce,[s("span",null,f(o.adTitle),1)]),s("div",ne,[s("div",de,[(t(!0),r(u,null,m(o.adItem,(i,J)=>(t(),v(I,{key:J,label:i.label,width:"15%",titleStyle:"#484848",titleBottom:"12px",marginBottom:"16px"},{default:b(()=>[E(R,{modelValue:i.selectedValue,"onUpdate:modelValue":[z=>i.selectedValue=z,z=>X(i,o.adTitle)],DataList:U,type:"radio"},null,8,["modelValue","onUpdate:modelValue","DataList"]),i.errorMessage?(t(),r("div",ie,f(i.errorMessage),1)):S("",!0)]),_:2},1032,["label"]))),128))])])]))),128)),_.value?(t(),r("div",ue,[me,s("div",_e,[he,s("div",pe,[(t(!0),r(u,null,m(n.value,(o,g)=>(t(),v(l,{key:g,color:"#0022991A"},{default:b(()=>[Y(f(o.label),1)]),_:2},1024))),128))])]),s("div",ge,[ve,s("div",be,[E(c,{modelValue:d.value,"onUpdate:modelValue":a[0]||(a[0]=o=>d.value=o),style:{width:"100%"},autosize:"",type:"textarea",placeholder:"备注"},null,8,["modelValue"]),h.value?(t(),r("div",fe,f(h.value),1)):S("",!0)])])])):S("",!0)]),_:2},1032,["title"]))),128)),E($,{onSubmit:A,onBack:H})])}}},xe=q(Ve,[["__scopeId","data-v-14d62d2a"]]);export{xe as default};
